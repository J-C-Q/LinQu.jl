X 1
H 2
H 3
H 4
CNOT 2 1
CNOT 4 3
CNOT 3 1
CNOT 4 3
H 1
H 2
H 3
H 4